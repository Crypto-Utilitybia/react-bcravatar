(this["webpackJsonpreact-bcravatar-example"]=this["webpackJsonpreact-bcravatar-example"]||[]).push([[0],{440:function(t,e,n){t.exports=n(985)},441:function(t,e,n){},458:function(t,e){},481:function(t,e){},483:function(t,e){},561:function(t,e){},563:function(t,e){},595:function(t,e){},596:function(t,e){},601:function(t,e){},603:function(t,e){},610:function(t,e){},629:function(t,e){},647:function(t,e){},662:function(t,e){},664:function(t,e){},696:function(t,e){},698:function(t,e){},705:function(t,e){},706:function(t,e){},727:function(t,e){},983:function(t,e,n){},985:function(t,e,n){"use strict";n.r(e);n(441);var a=n(20),r=n.n(a),c=n(435),i=n.n(c),o=n(170),u=n(247),s=n(41),l=n(172),f=n(248),d=n.n(f),b=(n(801),n(802),n(803),n(804),n(805),n(806),n(807),n(808),n(809),n(810),n(811),n(812),n(813),n(814),n(815),n(816),n(817),n(818),n(819),n(820),n(821),n(822),n(823),n(825),n(826),n(158),n(827),n(828),n(829),n(830),n(831),n(832),n(833),n(834),n(835),n(836),n(837),n(838),n(840),n(841),n(842),n(843),n(844),n(845),n(846),n(847),n(848),n(849),n(850),n(852),n(853),n(854),n(855),n(856),n(857),n(858),n(859),n(860),n(861),n(862),n(863),n(864),n(865),n(866),n(867),n(868),n(869),n(870),n(871),n(872),n(873),n(874),n(875),n(876),n(877),n(878),n(879),n(880),n(881),n(882),n(883),n(884),n(885),n(886),n(887),n(888),n(890),n(891),n(892),n(893),n(898),n(899),n(900),n(902),n(903),n(904),n(905),n(906),n(907),n(908),n(909),n(910),n(911),n(912),n(913),n(422),n(914),n(915),n(916),n(917),n(918),n(919),n(920),n(423),n(921),n(922),n(923),n(924),n(925),n(926),n(928),n(930),n(931),n(932),n(933),n(934),n(935),n(940),n(941),n(942),n(943),n(944),n(945),n(946),n(947),n(948),n(949),n(950),n(951),n(953),n(954),n(955),n(956),n(957),n(958),n(959),n(960),n(961),n(962),n(963),n(964),n(965),n(966),n(967),n(968),n(969),n(970),n(971),n(972),n(973),n(974),n(976),n(977),n(978),n(979),n(982),n(433),n(437)),m=["Web3","infura","network","address","className","placeholder","refresh","children"],p=function(t,e){return{1:"https://mainnet.infura.io/v3/".concat(e),4:"https://rinkeby.infura.io/v3/".concat(e),56:"https://bsc-dataseed.binance.org/",137:"https://rpc-mainnet.maticvigil.com/v1/7fa2effe8251c5c9816d77cadc1fe638ba8f8ed3"}[t]},h={1:"0xBb9499d98C01D97Cc02B40Fa767531c308989995",4:"0xD673224197Cf741365094B50b1ef1A2c99b84Cc3",56:"0xbF8ef894fC52b423c50A8086415B9D5620FC64ce",137:"0xbF8ef894fC52b423c50A8086415B9D5620FC64ce"},v=[{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getAvatar",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"avatarNFTs",outputs:[{internalType:"address",name:"nft",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bool",name:"isERC721",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getProfile",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],y={1:"https://api.studio.thegraph.com/query/2120/bcravatar-mainnet/1.0.1",4:"https://api.studio.thegraph.com/query/2120/bcravatar-rinkeby/1.2.5",56:"https://api.studio.thegraph.com/query/2120/bcravatar-bsc/1.0.1",137:"https://api.studio.thegraph.com/query/2120/bcravatar-polygon/1.0.1"},g="_styles-module__bcravatar__uBIq-",j=p,O=function(t,e){return t.includes("0x{id}")?t.replace("0x{id}",e):t.includes("{id}")?t.replace("{id}",e):t};function C(t,e,n,r,c){var i=Object(a.useState)(null),o=Object(s.a)(i,2),u=o[0],l=o[1],f=Object(a.useState)([null,!1]),d=Object(s.a)(f,2),m=d[0],y=d[1];Object(a.useEffect)((function(){if(e&&h[n]){var a="object"===typeof e?e:p(n,e);a&&(u?u.setProvider(a):l(new t(a)),y([null,!1]))}}),[e,n]);var g=function(t,e,n,a){return function(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["",!1],r=new n.eth.Contract(v,h[e]);return new Promise((function(e){Promise.all([r.methods.getAvatar(t).call(),r.methods.avatarNFTs(t).call()]).then((function(t){var n=Object(s.a)(t,2),r=n[0],c=n[1];c.tokenId>0?fetch(O(r,c.tokenId)).then((function(t){return t.json()})).then((function(t){if(t.image||t.image_url){var n=t.image||t.image_url;e([n,!0])}else e(a)})).catch((function(){return e(a)})):e([r,!1])})).catch((function(){return e(a)}))}))}(t,e,n,a).then(y).catch((function(t){"No Avatar"===t.error?y([m[0],!0]):y(Object(b.a)(m))}))};return Object(a.useEffect)((function(){if(r&&u){var t=m[0]||m[1]?c:500;setTimeout((function(){return g(r,n,u,m)}),t)}}),[r,n,u,c,m]),m}function w(t){var e=t.Web3,n=t.infura,a=t.network,c=t.address,i=t.className,o=void 0===i?"":i,u=t.placeholder,f=void 0===u?"https://ipfs.io/ipfs/QmVaFasJTocvnuEobz7HkRpADB82z5gYA2xuZrgYFmMoQz":u,d=t.refresh,b=void 0===d?15e3:d,p=t.children,h=Object(l.a)(t,m),v=C(e,n,a,c,b),y=Object(s.a)(v,2),j=y[0],O=[y[1]?"bcravatar is-nft":"bcravatar",g,o];return r.a.createElement("div",Object.assign({className:O.join(" ")},h),r.a.createElement("a",{href:"https://www.bcravatar.com/avatar",target:"_blank"},r.a.createElement("img",{className:"bcravatar__image",src:j||f})),r.a.createElement("div",{className:"bcravatar__content"},p))}function E(t,e,n){var r=Object(a.useState)([null,null]),c=Object(s.a)(r,2),i=c[0],o=c[1];return Object(a.useEffect)((function(){e&&y[t]&&function(t,e,n){var a=new n.eth.Contract(v,h[t]);return new Promise((function(t,n){return a.methods.getProfile(e).call().then((function(e){e?fetch(e).then((function(t){return t.json()})).then((function(e){t([e,null])})).catch(n):n({error:"No Profile"})})).catch(n)}))}(t,e,n).then(o).catch((function(t){return o([null,t])}))}),[t,e,n]),i}n(983);var k=["network","address","web3","className"],N="9aa3d95b3bc440fa88ea12eaa4456161";function F(t){var e=t.network,n=t.address,a=t.web3,c=t.className,i=void 0===c?"":c,o=Object(l.a)(t,k),u=E(e,n,a),f=Object(s.a)(u,2),d=f[0],b=f[1],m=!d&&!b,p=[b?"bcrprofile error":"bcrprofile",i];return r.a.createElement("pre",Object.assign({className:p.join(" ")},o),m?"Loading...":b?JSON.stringify(b,null,4):JSON.stringify(d,null,4))}var B=[{key:1,label:"Mainnet"},{key:4,label:"Rinkeby"},{key:56,label:"BSC"},{key:137,label:"Polygon"}],x={1:["0x1Ef9882554C6DaABEcd2c7056F8811C69674fc6D","0xBb9499d98C01D97Cc02B40Fa767531c308989995"],4:["0x23ABfdBd2535aC77ea60a078707a9e5820b0Fff2","0xD673224197Cf741365094B50b1ef1A2c99b84Cc3"],56:["0x1Ef9882554C6DaABEcd2c7056F8811C69674fc6D","0xbF8ef894fC52b423c50A8086415B9D5620FC64ce"],137:["0x1Ef9882554C6DaABEcd2c7056F8811C69674fc6D","0xbF8ef894fC52b423c50A8086415B9D5620FC64ce"]},T=function(){var t,e=Object(a.useState)(null),n=Object(s.a)(e,2),c=n[0],i=n[1],l=Object(a.useState)(B[0].key),f=Object(s.a)(l,2),b=f[0],m=f[1],p=Object(a.useState)([null,null]),g=Object(s.a)(p,2),C=Object(s.a)(g[0],2),E=C[0],k=C[1],T=g[1];return Object(a.useEffect)((function(){var t=new d.a(j(b,N));(function(t,e,n){return new Promise((function(a,r){return fetch(y[e],{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:'{\n\t\t\t\t\tavatars(where: { id_in: ["'.concat(t.map((function(t){return t.toLowerCase()})).join('","'),'"] }) {\n\t\t\t\t\t\tid,\n\t\t\t\t\t\turi,\n\t\t\t\t\t\thasNFT\n\t\t\t\t\t}\n\t\t\t\t}')})}).then((function(t){return t.json()})).then((function(t){var c=t.data.avatars;c.length?Promise.all(c.map((function(t){return new Promise((function(a){if(t.hasNFT){var r=new n.eth.Contract(v,h[e]);Promise.all([r.methods.getAvatar(address).call(),r.methods.avatarNFTs(address).call()]).then((function(e){var n=Object(s.a)(e,2),r=n[0],c=n[1];fetch(O(r,c.tokenId)).then((function(t){return t.json()})).then((function(e){if(e.image||e.image_url){var n=e.image||e.image_url;a([t.id,n,t.uri!==n])}else a([t.id,t.uri,!1])})).catch((function(){return a([t.id,t.uri,!1])}))})).catch((function(){return a([t.id,t.uri,!1])}))}else a([t.id,t.uri,!1])}))}))).then(a).catch(r):r({error:"No Avatar"})})).catch(r)}))})(x[b],b,t).then((function(t){return T([t.reduce((function(t,e){return Object(u.a)(Object(u.a)({},t),{},Object(o.a)({},e[0],{uri:e[1],hasNFT:e[2]}))}),{}),null])})).catch((function(t){return T([null,t])})),i(t)}),[b]),r.a.createElement("div",null,r.a.createElement("div",{className:"avatar-wrapper"},r.a.createElement("img",{id:"logo",src:"./logo.png",alt:"Crypto Utilitybia"}),r.a.createElement(w,{Web3:d.a,infura:N,network:b,address:x[b][0],placeholder:"/avataaars.png"},(t=x[b][0],"".concat(t.substr(0,6),"...").concat(t.substr(-4))))),r.a.createElement("select",{value:b,onChange:function(t){return m(t.target.value)}},B.map((function(t){return r.a.createElement("option",{key:t.key,value:t.key},t.label)}))),c&&r.a.createElement(F,{web3:c,infura:N,network:b,address:x[b][0]}),r.a.createElement("pre",{className:"bcrprofile"},E||k?k?JSON.stringify(k,null,4):JSON.stringify(E,null,4):"Loading..."))};i.a.render(r.a.createElement(T,null),document.getElementById("root"))}},[[440,1,2]]]);
//# sourceMappingURL=main.023afbaf.chunk.js.map