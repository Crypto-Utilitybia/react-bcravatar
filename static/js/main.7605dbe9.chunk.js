(this["webpackJsonpreact-bcravatar-example"]=this["webpackJsonpreact-bcravatar-example"]||[]).push([[0],{290:function(t,n,e){t.exports=e(653)},291:function(t,n,e){},308:function(t,n){},331:function(t,n){},333:function(t,n){},411:function(t,n){},413:function(t,n){},445:function(t,n){},446:function(t,n){},451:function(t,n){},453:function(t,n){},460:function(t,n){},479:function(t,n){},497:function(t,n){},512:function(t,n){},514:function(t,n){},546:function(t,n){},548:function(t,n){},555:function(t,n){},556:function(t,n){},577:function(t,n){},651:function(t,n,e){},653:function(t,n,e){"use strict";e.r(n);e(291);var r=e(14),a=e.n(r),c=e(286),i=e.n(c),o=e(92),u=e(145),s=e(32),f=e(93),l=e(146),h=e.n(l),d=["Web3","infura","network","address","className","placeholder","refresh","children"],b={1:"",4:"0x6EedE8E28C581989260da2d9401de60Ae2d4AA64",56:"",137:""},m=[{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getAvatar",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],p={1:"",4:"https://api.studio.thegraph.com/query/2120/bcravatar-rinkeby/1.2.4",56:"",137:""},v="_styles-module__bcravatar__uBIq-";function g(t){var n=t.Web3,e=t.infura,a=t.network,c=t.address,i=t.refresh,o=Object(r.useState)(null),u=Object(s.a)(o,2),f=u[0],l=u[1],h=Object(r.useState)([null,!1]),d=Object(s.a)(h,2),v=d[0],g=d[1];Object(r.useEffect)((function(){if(e&&b[a]){var t="object"===typeof e?e:function(t,n){return{1:"https://mainnet.infura.io/v3/".concat(n),4:"https://rinkeby.infura.io/v3/".concat(n),56:"https://bsc-dataseed.binance.org/",137:"https://polygon-mainnet.infura.io/v3/".concat(n)}[t]}(a,e);t&&(f?f.setProvider(t):l(new n(t)))}}),[e,a]);var j=function(t,n,e){return function(t,n,e){return new Promise((function(r,a){return fetch(p[n],{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:'{\n\t\t\t\t\tavatars(where: { id: "'.concat(t.toLowerCase(),'" }) {\n\t\t\t\t\t\tid,\n\t\t\t\t\t\turi,\n\t\t\t\t\t\thasNFT\n\t\t\t\t\t}\n\t\t\t\t}')})}).then((function(t){return t.json()})).then((function(t){return t.data.avatars[0]})).then((function(c){c?c.hasNFT?new e.eth.Contract(m,b[n]).methods.getAvatar(t).call().then((function(t){fetch(t).then((function(t){return t.json()})).then((function(t){if(t.image||t.image_url){var n=t.image||t.image_url;r([n,c.uri!==n])}else r([c.uri,!1])})).catch((function(){return r([c.uri,!1])}))})).catch((function(){return r([c.uri,!1])})):r([c.uri,!1]):a({error:"No Avatar"})})).catch(a)}))}(t,n,e).then(g).catch((function(t){console.log("Error: Fetch Avatar",t),g("",!1)}))};return Object(r.useEffect)((function(){if(c&&f){j(c,a,f);var t=setInterval((function(){return j(c,a,f)}),i);return function(){return clearInterval(t)}}}),[c,a,f,i]),v}function j(t){var n=t.Web3,e=t.infura,r=t.network,c=t.address,i=t.className,o=void 0===i?"":i,u=t.placeholder,l=void 0===u?"https://ipfs.io/ipfs/QmVaFasJTocvnuEobz7HkRpADB82z5gYA2xuZrgYFmMoQz":u,h=t.refresh,b=void 0===h?15e3:h,m=t.children,p=Object(f.a)(t,d),j=g({Web3:n,infura:e,network:r,address:c,refresh:b}),y=Object(s.a)(j,2),O=y[0],w=[y[1]?"bcravatar is-nft":"bcravatar",v,o];return a.a.createElement("div",Object.assign({className:w.join(" ")},p),a.a.createElement("a",{href:"https://www.bcravatar.com",target:"_blank"},a.a.createElement("img",{className:"bcravatar__image",src:O||l})),a.a.createElement("div",{className:"bcravatar__content"},m))}function y(t,n){var e=Object(r.useState)([null,null]),a=Object(s.a)(e,2),c=a[0],i=a[1];return Object(r.useEffect)((function(){n&&p[t]&&function(t,n){return new Promise((function(e,r){return fetch(p[n],{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:'{\n\t\t\t\t\tprofiles (where: { id: "'.concat(t.toLowerCase(),'" }) {\n\t\t\t\t\t\tid,\n\t\t\t\t\t\turi\n\t\t\t\t\t}\n\t\t\t\t}')})}).then((function(t){return t.json()})).then((function(t){return t.data.profiles[0]})).then((function(t){t?fetch(t.uri).then((function(t){return t.json()})).then((function(t){e([t,null])})).catch(r):r({error:"No Profile"})})).catch(r)}))}(n,t).then(i).catch((function(t){return i([null,t])}))}),[n,t]),c}e(651);var O=["network","address","className","placeholder"],w="9aa3d95b3bc440fa88ea12eaa4456161",N=new h.a("https://rinkeby.infura.io/v3/".concat(w)),E=["0x23ABfdBd2535aC77ea60a078707a9e5820b0Fff2","0xD673224197Cf741365094B50b1ef1A2c99b84Cc3"];function k(t){var n=t.network,e=t.address,r=t.className,c=void 0===r?"":r,i=(t.placeholder,Object(f.a)(t,O)),o=y(n,e),u=Object(s.a)(o,2),l=u[0],h=u[1],d=!l&&!h,b=[h?"bcrprofile error":"bcrprofile",c];return a.a.createElement("pre",Object.assign({className:b.join(" ")},i),d?"Loading...":h?JSON.stringify(h,null,4):JSON.stringify(l,null,4))}var _=function(){var t,n=Object(r.useState)([null,null]),e=Object(s.a)(n,2),c=Object(s.a)(e[0],2),i=c[0],f=c[1],l=e[1];return Object(r.useEffect)((function(){(function(t,n,e){return new Promise((function(r,a){return fetch(p[n],{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:'{\n\t\t\t\t\tavatars(where: { id_in: ["'.concat(t.map((function(t){return t.toLowerCase()})).join('","'),'"] }) {\n\t\t\t\t\t\tid,\n\t\t\t\t\t\turi,\n\t\t\t\t\t\thasNFT\n\t\t\t\t\t}\n\t\t\t\t}')})}).then((function(t){return t.json()})).then((function(t){var c=t.data.avatars;c.length?Promise.all(c.map((function(t){return new Promise((function(r){t.hasNFT?new e.eth.Contract(m,b[n]).methods.getAvatar(address).call().then((function(n){fetch(n).then((function(t){return t.json()})).then((function(n){if(n.image||n.image_url){var e=n.image||n.image_url;r([t.id,e,t.uri!==e])}else r([t.id,t.uri,!1])})).catch((function(){return r([t.id,t.uri,!1])}))})).catch((function(){return r([t.id,t.uri,!1])})):r([t.id,t.uri,!1])}))}))).then(r).catch(a):a({error:"No Avatar"})})).catch(a)}))})(E,4,N).then((function(t){return l([t.reduce((function(t,n){return Object(u.a)(Object(u.a)({},t),{},Object(o.a)({},n[0],{uri:n[1],hasNFT:n[2]}))}),{}),null])})).catch((function(t){return l([null,t])}))}),[]),a.a.createElement("div",null,a.a.createElement("div",{className:"avatar-wrapper"},a.a.createElement("img",{id:"logo",src:"./logo.png",alt:"Crypto Utilitybia"}),a.a.createElement(j,{Web3:h.a,infura:w,network:4,address:E[0]},"".concat((t=E[0]).substr(0,6),"...").concat(t.substr(-4)))),a.a.createElement(k,{infura:w,network:4,address:E[0]}),a.a.createElement("pre",{className:"bcrprofile"},i||f?f?JSON.stringify(f,null,4):JSON.stringify(i,null,4):"Loading..."))};i.a.render(a.a.createElement(_,null),document.getElementById("root"))}},[[290,1,2]]]);
//# sourceMappingURL=main.7605dbe9.chunk.js.map